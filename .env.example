# =============================================================
# Cloudflare IP Monitor - Environment Configuration
# Copy this file to .env and adjust values as needed.
# =============================================================

# ---- Directories -------------------------------------------
# DATA_DIR=./data
# LOGS_DIR=./logs
# SCANNER_DIR=./scanner

# ---- Database ----------------------------------------------
# SQLAlchemy connection string (default: SQLite in data/)
# DATABASE_URL=sqlite:///data/cloudflare_ips.db

# ---- Scanner Binary ----------------------------------------
# Path to the CloudflareScanner binary (auto-downloaded if missing)
# SCANNER_BINARY=./scanner/CloudflareScanner

# ---- Initial Scan Parameters -------------------------------
SCAN_MIN_SPEED=10.0
SCAN_MAX_LOSS_RATE=0.25
SCAN_MAX_LATENCY=1000
SCAN_TEST_COUNT=50
SCAN_THREADS=300
SCAN_PING_TIMES=4
SCAN_DOWNLOAD_TIMEOUT=15
SCAN_PORT=443
SCAN_URL=https://speed.cloudflare.com/__down?bytes=52428800
# Use HTTP ping instead of TCP ping for latency testing (true/false)
SCAN_HTTPING=true
# Expected HTTP status code for httping (default: 200)
# SCAN_HTTPING_CODE=200
# Periodic scan interval in seconds (0 = disabled, min 60)
# Example: 3600 = rescan all Cloudflare ranges every hour
SCAN_SCHEDULE_INTERVAL=0

# ---- Monitor Parameters ------------------------------------
MONITOR_INTERVAL=120
MONITOR_DOWNLOAD_TIMEOUT=10
MONITOR_PING_TIMES=4
MONITOR_THREADS=100
MONITOR_MAX_IPS=20
MONITOR_PORT=443
MONITOR_URL=https://speed.cloudflare.com/__down?bytes=52428800
# Use HTTP ping instead of TCP ping for monitor tests (true/false)
MONITOR_HTTPING=true
# Expected HTTP status code for monitor httping (default: 200)
# MONITOR_HTTPING_CODE=200

# ---- Dashboard ---------------------------------------------
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=8080

# ---- Data Retention ----------------------------------------
RETENTION_DAYS=30

# ---- Auto Cleanup ------------------------------------------
# Automatically deactivate IPs with no download speed (true/false)
CLEANUP_ENABLED=true
# Number of consecutive tests with zero speed before deactivating an IP
CLEANUP_NO_SPEED_TESTS=10
# Automatically deactivate IPs below a minimum download speed (true/false)
CLEANUP_MIN_SPEED_ENABLED=false
# Minimum download speed threshold in MB/s (IPs below this in last test get deactivated)
CLEANUP_MIN_SPEED=5

# ---- Logging -----------------------------------------------
LOG_LEVEL=INFO
# LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ---- Cloudflare IP Ranges (comma-separated) ----------------
# Override only if Cloudflare publishes new ranges.
# CLOUDFLARE_IPV4_RANGES=173.245.48.0/20,103.21.244.0/22,103.22.200.0/22,103.31.4.0/22,141.101.64.0/18,108.162.192.0/18,190.93.240.0/20,188.114.96.0/20,197.234.240.0/22,198.41.128.0/17,162.158.0.0/15,104.16.0.0/13,104.24.0.0/14,172.64.0.0/13,131.0.72.0/22
# CLOUDFLARE_IPV6_RANGES=2400:cb00::/32,2606:4700::/32,2803:f800::/32,2405:b500::/32,2405:8100::/32,2a06:98c0::/29,2c0f:f248::/32
